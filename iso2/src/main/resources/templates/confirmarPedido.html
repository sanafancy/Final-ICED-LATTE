<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Confirma tu Pedido</title>
</head>
<body>
  <h2>Confirmar Pedido</h2>

  <p><strong>Cliente:</strong> <span th:text="${cliente.nombre}"></span></p>
  <form action="/confirmarPedido" method="post">
    <!-- seleccionar direccion-->
    <!--label for="direccionSelect"><strong>Dirección de envío:</strong></label>
    <select name="direccionId" id="direccionSelect">
      <option th:each="direccion : ${cliente.direcciones}"
              th:value="${direccion.id}"
              th:text="${direccion.calle + ', ' + direccion.numero + ', ' + direccion.municipio}">
      </option>
    </select-->

    <!-- Resumen del pedido -->
    <h3>Resumen del pedido:</h3>
    <ul>
      <li th:each="item : ${itemsPedido}">
        <span th:text="${item.nombre}"></span> -
        <span th:text="'€' + ${item.precio}"></span>
      </li>
    </ul>

    <h3>Total: <span th:text="'€' + ${total}"></span></h3>

    <!--metodo de pago elegido -->
    <h3>Método de Pago</h3>
    <p th:text="${metodoPago}">Pago no seleccionado</p>

    <form th:action="@{/pedido/finalizar}" method="post">
      <input type="hidden" name="pedidoId" th:value="${pedido.id}" />
      <label for="direccion">Selecciona una dirección:</label>
      <select name="direccionId" id="direccion" required>
        <option th:each="dir : ${cliente.direcciones}"
                th:value="${dir.id}"
                th:text="${dir.calle} + ' ' + ${dir.numero} + ', ' + ${dir.municipio}">
        </option>
      </select>

      <label for="metodoPago">Selecciona método de pago:</label>
      <select name="metodoPago" id="metodoPago" required>
        <option th:each="m : ${metodosPago}" th:value="${m}" th:text="${m}"></option>
      </select>

      <button type="submit">Confirmar Pedido</button>
    </form>
    <form th:action="@{/pedido/eliminar}" method="post">
      <input type="hidden" name="pedidoId" th:value="${pedido.id}" />
      <button type="submit">Atrás</button>
    </form>
  </form>
</body>
</html>