<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Inicio • Food Delivery</title>
    <link rel="stylesheet" href="/css/inicio.css">
</head>
<body>


<p th:if="${session.cliente != null}">👤Hola <span th:text="${session.cliente.nombre}"></span></p>
<p th:if="${session.cliente == null}">No hay cliente en sesión</p>
<header class="site-header">
    <div class="container header-inner">
        <a href="/inicio" class="logo">🍔 ICED Latte</a>
        <nav>
            <!-- Mostrar solo si NO hay cliente en sesión -->
            <div th:if="${session.cliente == null}">
                <a href="/login">Iniciar Sesión</a>
                <a href="/registro">Registrarse</a>
            </div>

            <div th:if="${session.cliente != null}">
                <form th:action="@{/logout}" method="get">
                    <button type="submit">Cerrar sesión</button>
                </form>
            </div>

            <th:block th:if="${session.restaurante != null}">
                <a href="/restaurante/panel">Panel Restaurante</a>
            </th:block>
            <th:block th:if="${session.cliente != null}">
            </th:block>

        </nav>

    </div>
</header>

<section class="hero">
    <div class="container hero-content">
        <h1>¿Tienes hambre?</h1>
        <p class="subtitle">Pide comida rápida y fresca en un clic</p>
        <form action="/restaurante/buscar" method="get" class="hero-search">
            <input type="text" name="busqueda" placeholder="Introduce tu ciudad o restaurante">
            <button type="submit">Buscar 🚀</button>
        </form>
    </div>
</section>
<script>
    function toggleFavoritos() {
        const favSection = document.getElementById('favoritos-section');
        favSection.style.display = (favSection.style.display === 'none') ? 'block' : 'none';
    }
</script>
<section class="section" th:if="${session.cliente != null}">
    <a href="/direcciones/ver">
        <button>📍 Ver Mis Direcciones</button>
    </a>
</section>
<section class="section" th:if="${session.cliente != null}">
    <a href="/direcciones/añadir">
        <button>➕ Añadir Nueva Dirección</button>
    </a>
</section>
<section class="section" th:if="${session.cliente != null}">
    <button onclick="toggleFavoritos()" style="margin-bottom: 10px;">⭐Favoritos</button>
    <div id="favoritos-section" style="display: none;">
        <a href="/restaurante/favoritos">
            <button style="margin-top: 10px;">Ir a Favoritos</button>
        </a>
    </div>
</section>

<script>
    function toggleFavoritos() {
        const favSection = document.getElementById('favoritos-section');
        favSection.style.display = (favSection.style.display === 'none') ? 'block' : 'none';
    }
</script>


<section class="section restaurants">
    <div class="container">
        <h2>🍽️ Restaurantes Registrados</h2>
        <ul class="restaurant-list">
            <li th:each="restaurante : ${restaurantes}">
                <strong th:text="${restaurante.nombre}">Nombre del Restaurante</strong><br>
                <span th:text="${restaurante.direccion.calle + ', ' + restaurante.direccion.municipio + ' (' + restaurante.direccion.codigoPostal + ')'}">
                Dirección completa aquí
                </span>
            </li>
        </ul>
        <p th:if="${restaurantes != null and #lists.isEmpty(restaurantes)}">No se encontraron restaurantes.</p>
    </div>
</section>

<footer class="site-footer">
    <div class="container">
        <small>© 2025 FastFresh • Gestión de pedidos y entregas</small>
    </div>
</footer>
</body>
</html>
